<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Bestilling av kinobillett</title>
    <script>
        let billetter = [];

        function kjopBillett() {
            let film = document.getElementById("film").value;
            let antall = document.getElementById("antall").value;
            let fornavn = document.getElementById("fornavn").value;
            let etternavn = document.getElementById("etternavn").value;
            let telefonnr = document.getElementById("telefonnr").value;
            let mailadresse = document.getElementById("mailadresse").value;

            if (!film || !antall || !fornavn || !etternavn || !telefonnr || !mailadresse) {
                alert("Fyll ut alle feltene etter det de spør om før du trykker 'Kjøp billett'");
                return;
            }

            if (!validerMailadresse(mailadresse) || !validerTelefonnr(telefonnr) || isNaN(antall) || antall <= 0) {
                return;
            }

            let billett = {
                film: film,
                antall: antall,
                fornavn: fornavn,
                etternavn: etternavn,
                telefonnr: telefonnr,
                mailadresse: mailadresse
            };
            billetter.push(billett);
            oppdaterBillettListe();
            nullstillInputfelter();
        }

        function oppdaterBillettListe() {
            let listeElement = document.getElementById("billettListe");
            listeElement.innerHTML = "";

            for (let billett of billetter) {
                let billettInfo = document.createElement("h3");
                billettInfo.textContent = `Film: ${billett.film}, Antall: ${billett.antall}, Navn: ${billett.fornavn} ${billett.etternavn}, Telefon: ${billett.telefonnr}, Mail: ${billett.mailadresse}`;
                listeElement.appendChild(billettInfo);
            }
        }

        function nullstillInputfelter() {
            document.getElementById("film").value = "";
            document.getElementById("antall").value = "";
            document.getElementById("fornavn").value = "";
            document.getElementById("etternavn").value = "";
            document.getElementById("telefonnr").value = "";
            document.getElementById("mailadresse").value = "";
        }

        function slettAlleBilletter() {
            billetter = [];
            oppdaterBillettListe();
        }

        function validerMailadresse(mailadresse) {
            let mailInput = document.getElementById('mailadresse');
            if (!mailadresse.match(/^\S+@\S+\.\S+$/)) {
                mailInput.setCustomValidity("Skriv inn en gyldig mailadresse!");
                mailInput.reportValidity();
                return false;
            }
            return true;
        }

        function validerTelefonnr(telefonnr) {
            let telefonInput = document.getElementById('telefonnr');
            if (!telefonnr.match(/^\d{8}$/)) {
                telefonInput.setCustomValidity("Skriv inn et gyldig telefonnummer bestående av 8 siffer!");
                telefonInput.reportValidity();
                return false;
            }
            return true;
        }
    </script>
</head>
<body>
<h1>Bestilling av kinobilletter</h1>
<div>
    <label for="film">Velg film:</label>
    <select id="film" required>
        <option value="Biler 3">Biler 3</option>
        <option value="De utrolige">De utrolige</option>
        <option value="Barbie">Barbie</option>
        <option value="Oppenheimer">Oppenheimer</option>
        <option value="Bukkene bruse på badeland">Bukkene bruse på badeland</option>
    </select>
</div>
<br>
<div>
    <label for="antall">Antall billetter:</label>
    <input type="number" id="antall" min="1" required>
</div>
<br>
<div>
    <label for="fornavn">Fornavn:</label>
    <input type="text" id="fornavn" required>
</div>
<br>
<div>
    <label for="etternavn">Etternavn:</label>
    <input type="text" id="etternavn" required>
</div>
<br>
<div>
    <label for="telefonnr">Telefonnr:</label>
    <input type="text" id="telefonnr" pattern="\d{8}" required>
</div>
<br>
<div>
    <label for="mailadresse">Epost:</label>
    <input type="email" id="mailadresse" required>
</div>
<br>
<button onclick="kjopBillett()">Kjøp billett</button>
<h2>Alle billetter</h2>
<ul id="billettListe"></ul>
<button onclick="slettAlleBilletter()">Slett alle billetter</button>
</body>
</html>